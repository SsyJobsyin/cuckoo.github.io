/* 基础变量（会被主题覆盖） */
:root{
  --bg:#f7f7fb;--card:#fff;--line:#e9e9f3;--muted:#6b7280;--text:#1f2937;
  --accent:#7c5cff;--ok:#22c55e;--danger:#ef4444;--shadow:0 8px 28px rgba(31,41,55,.08);
  --r:16px;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,"Noto Sans SC","PingFang SC",sans-serif;
}

/* 主题：成人（商务简洁） */
.theme-adult{
  --accent:#5B73FF;
  --bg: radial-gradient(800px 400px at -10% -10%,#ecebff 0,transparent 60%), radial-gradient(700px 400px at 110% 0,#ffe6f2 0,transparent 50%), #f6f8ff;
}

/* 主题：少儿（卡通、小猪佩奇调性：柔和粉、天蓝、薄荷绿） */
.theme-kids{
  --accent:#FF7CC8;
  --bg: radial-gradient(800px 400px at -10% -10%,#ffdff1 0,transparent 60%),
        radial-gradient(700px 400px at 110% 0,#dff4ff 0,transparent 50%),
        #fffafc;
}

/* 全局样式 */
*{box-sizing:border-box} body{margin:0;background:var(--bg);color:var(--text);line-height:1.6}
.container{max-width:980px;margin:0 auto;padding:14px}
.header{display:flex;align-items:center;gap:14px;flex-wrap:wrap}
.brand{display:flex;align-items:center;gap:10px}
.logo{display:inline-grid;place-items:center;width:44px;height:44px;border-radius:12px;background:linear-gradient(135deg,var(--accent),#9ec5ff);box-shadow:0 6px 16px rgba(124,92,255,.35);font-weight:900;color:#fff}
.tag{margin:0;color:var(--muted)}
.nav{margin-left:auto;display:flex;gap:8px;flex-wrap:wrap}
.nav button,.nav select{background:#fff;border:1px solid var(--line);padding:9px 12px;border-radius:12px;cursor:pointer;box-shadow:var(--shadow)}
.card{background:var(--card);border:1px solid var(--line);border-radius:var(--r);padding:14px;box-shadow:var(--shadow);margin:8px 0}
.badge{display:inline-flex;gap:6px;align-items:center;border:1px solid var(--line);padding:6px 10px;border-radius:999px;background:#fff;color:#6b7280}
.cta{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
.btn{border:none;background:var(--accent);color:#fff;padding:10px 14px;border-radius:12px;cursor:pointer;font-weight:700}
.btn.secondary{background:#fff;color:#1f2937;border:1px solid var(--line)}
.section-title{display:flex;align-items:center;justify-content:space-between}
.grid{display:grid;gap:10px}
.grid.cols-2{grid-template-columns:1fr 1fr}
.grid.cols-3{grid-template-columns:repeat(3,1fr)}
.item{border:1px solid var(--line);background:#fff;border-radius:12px;padding:10px}
.list{margin:0;padding-left:18px}
.progress{height:10px;background:#f1f2f7;border:1px solid var(--line);border-radius:999px;overflow:hidden}
.progress>div{height:100%;background:linear-gradient(90deg,var(--ok),var(--accent));width:0%;transition:width .25s}
.tabs{display:flex;gap:8px}
.tab{border:1px solid var(--line);background:#fff;border-radius:999px;padding:6px 12px;cursor:pointer}
.tab.active{background:#111827;color:#fff}
.small{color:#6b7280;font-size:12px}
.footer{padding:20px;text-align:center;color:#6b7280}
.hidden{display:none}

/* 数据面板 */
.stats .stat{display:grid;place-items:center}
.stat-num{font-size:28px;font-weight:900}
.stat-label{color:#6b7280}

/* 游戏 */
.word{display:inline-block;border:1px dashed #d6d6eb;padding:10px 12px;margin:6px;border-radius:12px;min-height:36px;user-select:none;background:#fff}
.word.sel{outline:2px solid #b6a5ff}
.word.ok{border-color:var(--ok);background:#f2fff6}
.word.bad{border-color:var(--danger);background:#fff1f1}

/* 学习伙伴 */
#buddy{position:fixed;right:10px;bottom:86px;max-width:260px;background:#fffbea;border:1px solid #ffe9b3;border-radius:14px;padding:10px;box-shadow:0 6px 20px rgba(0,0,0,.12);z-index:15}
#buddyHeader{display:flex;align-items:center;gap:8px;margin-bottom:6px}
#buddyAvatar{width:42px;height:42px;border-radius:10px;background:#ffefd6;display:flex;align-items:center;justify-content:center;font-size:24px}
#buddyClose{margin-left:auto;border:none;background:transparent;font-size:18px;cursor:pointer;color:#9a7b00}
#buddyText{font-size:14px;color:#5b4a00;white-space:pre-line}
#toast{position:fixed;left:50%;transform:translateX(-50%);bottom:18px;background:#111827;color:#fff;border-radius:999px;padding:8px 14px;opacity:0;transition:.25s;box-shadow:0 10px 30px rgba(0,0,0,.18);z-index:20}
#toast.show{opacity:1}

textarea{width:100%;padding:10px;border:1px solid var(--line);border-radius:12px}
@media (max-width:640px){.grid.cols-2,.grid.cols-3{grid-template-columns:1fr}}
/* === Mobile 优化补丁（粘到 style.css 最底部） === */

/* 防 iOS 自动放大、字体平滑 */
html{-webkit-text-size-adjust:100%}
body{text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased}

/* 流式字体：手机上 15–17px，平板/桌面随屏幕增大 */
:root{
  --fs-base: clamp(15px, 2.8vw, 17px);
  --fs-h1: clamp(22px, 5.8vw, 30px);
  --fs-h2: clamp(18px, 4.8vw, 24px);
  --fs-small: clamp(12px, 3.2vw, 14px);
}
body{font-size:var(--fs-base); line-height:1.65}
h1{font-size:var(--fs-h1)} h2{font-size:var(--fs-h2)}
.small{font-size:var(--fs-small)}

/* 容器与留白：贴合手机、安全区（刘海/底部 Home 指示条） */
.container{padding:12px 16px 16px 16px}
header.header{padding:12px 16px 8px 16px}
footer.footer{padding:14px 16px env(safe-area-inset-bottom) 16px}

/* 导航与按钮：增大触控面积、支持换行 */
.nav{flex-wrap:wrap; gap:8px}
.nav button,.nav select{
  min-height:44px; padding:10px 12px; font-size:1em;
}

/* 卡片与网格：小屏单列、保证可读性 */
.card{padding:12px; border-radius:14px}
.grid{gap:10px}
@media (max-width:640px){
  .grid.cols-2,.grid.cols-3{grid-template-columns:1fr}
}

/* 表单：防止 iOS 聚焦时页面放大 */
input,select,textarea{font-size:16px}

/* 图片/视频自适应 */
img,video{max-width:100%; height:auto}

/* 单词/长链接换行，避免溢出 */
*{word-break:break-word; overflow-wrap:anywhere}

/* 进度条更粗一点，便于触控观看 */
.progress{height:12px}
